<!DOCTYPE html>
<html>
    <head>
    <title>Mi gran amor por ti ❤</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Press Start 2P', monospace;
            /* Puedes cambiarla por otra */
        }
        /* CONTENEDOR PRINCIPAL */
        #game-container {
            border-radius: 15px;
            position: relative;
            width: 1200px;
            height: 600px;
        }
        /* LIENZO DEL JUEGO */
        #gameCanvas {
            border-radius: 15px;
            position: absolute;
            top: 0;
            left: 0;
            image-rendering: pixelated;
        }
        /* CAJA DE DIÁLOGO CON ESTILO MEJORADO */
        #dialog-box {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            /* Fondo con gradiente y transparencia */
            background: linear-gradient(135deg, rgba(63, 40, 90, 0.8) 0%, rgba(120, 74, 168, 0.8) 100%);
            color: #fff;
            padding: 20px;
            /* Borde dorado más sutil */
            border: 2px solid #ffd700;
            border-radius: 16px;
            font-size: 16px;
            display: none;
            animation: fadeIn 0.3s ease-in;
        }
        /* ANIMACIÓN DE APARICIÓN */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        /* ESTILO DE LOS BOTONES */
        .choice-button {
            background: linear-gradient(135deg, #6a4f95 0%, #7f67aa 100%);
            color: #fff;
            border: 2px solid #ffd700;
            padding: 12px 24px;
            margin: 8px;
            cursor: pointer;
            font-family: inherit;
            font-size: 14px;
            transition: all 0.3s;
            border-radius: 8px;
        }
        .choice-button:hover {
            /* Invertimos el gradiente al pasar el mouse */
            background: linear-gradient(135deg, #7f67aa 0%, #6a4f95 100%);
            transform: translateY(-2px);
        }
        /* CONTENEDOR DE OPCIONES DE DIÁLOGO */
        #choices-container {
            margin-top: 15px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas" width="1200" height="600"></canvas>
        <div id="dialog-box">
            <div id="dialog-text"></div>
            <div id="choices-container"></div>
        </div>
    </div>
    <script>
        /********************************************************
         *                    SPRITE CLASS
         *******************************************************/
         class Sprite {
            constructor(x, y, width, height, color) {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = height;
                this.color = color;
                this.frame = 0;
                this.animationSpeed = 0.1;
                this.animationCounter = 0;
            }
            update() {
                this.animationCounter += this.animationSpeed;
                if (this.animationCounter >= 1) {
                    this.frame = (this.frame + 1) % 4;
                    this.animationCounter = 0;
                }
            }
            
            drawCharacter(ctx, isBoyfriend, isWedding = false) {
                // Efecto de iluminación
                ctx.save();
                let centerX = this.x + 10;
                let centerY = this.y - 30;
                let gradient = ctx.createRadialGradient(centerX, centerY, 2, centerX, centerY, 30);
                gradient.addColorStop(0, isBoyfriend ? "rgba(63,63,63,0.6)" : "rgba(255,215,0,0.6)");
                gradient.addColorStop(1, "rgba(0,0,0,0)");
                ctx.fillStyle = gradient;
                ctx.fillRect(this.x - 20, this.y - 70, 60, 60);
                ctx.restore();

                // Vestido de novia
                if (!isBoyfriend && isWedding) {
                    // Vestido blanco con detalles
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(this.x - 5, this.y - 50, 30, 50); // Cuerpo
                    ctx.fillRect(this.x - 10, this.y - 30, 40, 5); // Mangas
                    
                    // Velo
                    ctx.strokeStyle = 'rgba(255,255,255,0.7)';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.moveTo(this.x + 15, this.y - 50);
                    ctx.lineTo(this.x + 15, this.y - 100);
                    ctx.stroke();
                    
                    // Cabello con tocado
                    ctx.fillStyle = '#8b4513';
                    ctx.fillRect(this.x, this.y - 55, 20, 10);
                    ctx.fillStyle = '#FFFFFF';
                    ctx.beginPath();
                    ctx.arc(this.x + 10, this.y - 58, 5, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    // Personaje normal
                    ctx.fillStyle = this.color;
                    ctx.fillRect(this.x, this.y - 30, 20, 30);
                }

                ctx.fillStyle = isBoyfriend ? '#000000' : '#8b4513';
                if (isBoyfriend) {
                    ctx.fillRect(this.x, this.y - 48, 20, 5);
                } else {
                    ctx.fillRect(this.x, this.y - 48, 20, 8);
                    ctx.fillRect(this.x + 15, this.y - 42, 5, 15);
                }

                // Cabeza y rasgos comunes
                ctx.fillStyle = '#ffdeb3';
                ctx.fillRect(this.x + 2, this.y - 45, 16, 16);
                ctx.fillStyle = '#000';
                ctx.fillRect(this.x + 6, this.y - 40, 2, 2);
                ctx.fillRect(this.x + 12, this.y - 40, 2, 2);
            }
        }

        /********************************************************
         *                    SCENE CLASS
         *******************************************************/
        class Scene {
            constructor(name, bgColor, elements) {
                this.name = name;
                this.bgColor = bgColor;
                this.elements = elements;
            }
            draw(ctx, width, height) {
                ctx.fillStyle = this.bgColor;
                ctx.fillRect(0, 0, width, height);
                switch (this.name) {
                    case 'temple':
                        this.drawTemple(ctx);
                        break;
                    case 'cafe':
                        this.drawCafe(ctx);
                        break;
                    case 'park':
                        this.drawPark(ctx);
                        break;
                    case 'recuerdos1':
                        this.drawRecuerdos1(ctx);
                        break;
                    case 'recuerdos2':
                        this.drawRecuerdos2(ctx);
                        break;
                    case 'fuegosArtificiales':
                        this.drawFuegosArtificiales(ctx);
                        break;
                    default:
                        // Escena por defecto o en blanco
                        break;
                }
            }
            drawWedding(ctx) {
                // Fondo blanco puro
                ctx.fillStyle = '#FFFFFF';
                ctx.fillRect(0, 0, 1200, 600);
                
                // Arco floral
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 5;
                ctx.beginPath();
                ctx.arc(600, 300, 200, 0, Math.PI);
                ctx.stroke();
                
                // Pétalos
                for(let i = 0; i < 50; i++) {
                    ctx.fillStyle = `hsl(${Math.random()*360}, 70%, 60%)`;
                    ctx.beginPath();
                    ctx.arc(Math.random()*1200, Math.random()*600, 3, 0, Math.PI*2);
                    ctx.fill();
                }
            }
            /******************************************************
             *                    TEMPLE SCENE
             ******************************************************/
            drawTemple(ctx) {
                // Cielo
                const gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, '#5aa7d1');
                gradient.addColorStop(1, '#a8e4ff');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 1200, 400);
                // Suelo
                ctx.fillStyle = '#78C05A';
                ctx.fillRect(0, 400, 1200, 200);
                this.drawGrass(ctx);
                // Base del templo
                ctx.fillStyle = '#5a3410';
                ctx.fillRect(240, 350, 320, 50);
                // Sombras
                ctx.fillStyle = 'rgba(0,0,0,0.3)';
                ctx.fillRect(260, 360, 300, 190);
                // Estructura principal
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(250, 150, 300, 200);
                this.drawBrickTexture(ctx, 250, 150, 300, 200);
                // Techo
                ctx.fillStyle = '#4A2813';
                ctx.beginPath();
                ctx.moveTo(200, 150);
                ctx.lineTo(400, 50);
                ctx.lineTo(600, 150);
                ctx.closePath();
                ctx.fill();
                // Detalles
                this.drawTempleDetails(ctx);
                // Iluminación adicional
                const lightGradient = ctx.createRadialGradient(650, 50, 0, 650, 50, 200);
                lightGradient.addColorStop(0, 'rgba(255,255,200,0.4)');
                lightGradient.addColorStop(1, 'rgba(255,255,200,0)');
                ctx.fillStyle = lightGradient;
                ctx.fillRect(0, 0, 1200, 400);
            }
            drawBrickTexture(ctx, x, y, w, h) {
                ctx.fillStyle = '#6b3d0e';
                for (let i = 0; i < w; i += 15) {
                    for (let j = 0; j < h; j += 8) {
                        if ((i + j) % 20 < 15) {
                            ctx.fillRect(x + i, y + j, 12, 5);
                        }
                    }
                }
            }
            drawTempleDetails(ctx) {
                // Puerta
                ctx.fillStyle = '#5a3410';
                ctx.fillRect(370, 200, 60, 100);
                // Ventanas
                const windowGradient = ctx.createLinearGradient(0, 200, 0, 300);
                windowGradient.addColorStop(0, '#8a7455');
                windowGradient.addColorStop(1, '#c0a080');
                ctx.fillStyle = windowGradient;
                ctx.fillRect(280, 180, 40, 70);
                ctx.fillRect(480, 180, 40, 70);
                // Decoraciones
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(250, 150);
                ctx.lineTo(400, 50);
                ctx.lineTo(550, 150);
                ctx.stroke();
            }
            drawGrass(ctx) {
                ctx.fillStyle = '#67a35a';
                for (let i = 0; i < 1200; i += 5) {
                    ctx.beginPath();
                    ctx.moveTo(i, 400);
                    ctx.lineTo(i + 5, 400);
                    ctx.lineTo(i + 2.5, 390 + Math.random() * 10);
                    ctx.closePath();
                    ctx.fill();
                }
            }
            /******************************************************
             *                    CAFE SCENE
             ******************************************************/
            drawCafe(ctx) {
                // Interior
                ctx.fillStyle = '#DEB887';
                ctx.fillRect(0, 0, 1200, 600);
                // Ventana
                ctx.fillStyle = '#87CEEB';
                ctx.fillRect(50, 100, 200, 150);
                // Mesa
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(300, 300, 100, 10);
                ctx.fillRect(320, 310, 10, 50);
                ctx.fillRect(370, 310, 10, 50);
                // Tazas
                ctx.fillStyle = '#FFFFFF';
                ctx.fillRect(320, 290, 20, 10);
                ctx.fillRect(360, 290, 20, 10);
            }
            /******************************************************
             *                    PARK SCENE
             ******************************************************/
            drawPark(ctx) {
                // Cielo
                const gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, '#FF6B6B');
                gradient.addColorStop(1, '#FFB997');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 1200, 400);
                // Suelo
                ctx.fillStyle = '#228B22';
                ctx.fillRect(0, 400, 1200, 200);
                this.drawGrass(ctx);
                // Árboles
                for (let i = 0; i < 5; i++) {
                    ctx.save();
                    ctx.translate(-10, 10);
                    ctx.fillStyle = 'rgba(0,0,0,0.2)';
                    this.drawTree(ctx, 100 + i * 150, 300);
                    ctx.restore();
                    this.drawTree(ctx, 100 + i * 150, 300);
                }
                // Banco
                ctx.fillStyle = 'rgba(0,0,0,0.2)';
                ctx.fillRect(360, 410, 110, 25);
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(350, 380, 100, 20);
                ctx.fillRect(360, 400, 10, 30);
                ctx.fillRect(430, 400, 10, 30);
            }
            drawTree(ctx, x, y) {
                ctx.fillStyle = '#228B22';
                ctx.beginPath();
                ctx.moveTo(x, y - 50);
                ctx.lineTo(x - 25, y);
                ctx.lineTo(x + 25, y);
                ctx.closePath();
                ctx.fill();
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(x - 5, y, 10, 30);
            }
            /******************************************************
             *             RECUERDOS 1 SCENE
             ******************************************************/
            drawRecuerdos1(ctx) {
                // Fondo suave, casi blanco
                ctx.fillStyle = '#F8F8F8';
                ctx.fillRect(0, 0, 1200, 600);
                // Ejemplo de siluetas o recuadros
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(100, 100, 200, 150);
                ctx.fillRect(500, 200, 200, 150);
                // Texto minimalista
                ctx.fillStyle = '#000';
                ctx.font = '16px monospace';
                ctx.fillText('Manos entrelazadas...', 120, 130);
                ctx.fillText('El nerviosismo al ajustar la corbata...', 520, 230);
            }
            /******************************************************
             *             RECUERDOS 2 SCENE
             ******************************************************/
            drawRecuerdos2(ctx) {
                // Fondo suave, casi blanco
                ctx.fillStyle = '#F8F8F8';
                ctx.fillRect(0, 0, 1200, 600);
                // Siluetas
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(150, 300, 150, 150);
                ctx.fillRect(450, 100, 150, 150);
                // Texto minimalista
                ctx.fillStyle = '#000';
                ctx.font = '16px monospace';
                ctx.fillText('Un abrazo lleno de mariposas...', 160, 330);
                ctx.fillText('Las fotos que tomamos juntos...', 460, 130);
            }
            /******************************************************
             *           FUEGOS ARTIFICIALES SCENE
             ******************************************************/
            drawFuegosArtificiales(ctx) {
                // Cielo nocturno
                ctx.fillStyle = '#000000';
                ctx.fillRect(0, 0, 1200, 600);
                // Fuegos artificiales simples
                for (let i = 0; i < 5; i++) {
                    let x = Math.random() * 1200;
                    let y = Math.random() * 300;
                    let size = Math.random() * 50 + 20;
                    let color = `hsl(${Math.random() * 360}, 70%, 60%)`;
                    this.drawFirework(ctx, x, y, size, color);
                }
                // Plataforma o balcón
                ctx.fillStyle = '#444';
                ctx.fillRect(0, 500, 1200, 100);
                // Texto
                ctx.fillStyle = '#fff';
                ctx.font = '16px monospace';
                ctx.fillText('Ese beso bajo los fuegos artificiales...', 280, 550);
            }
            drawFirework(ctx, x, y, size, color) {
                ctx.save();
                ctx.fillStyle = color;
                for (let i = 0; i < 15; i++) {
                    let angle = (Math.PI * 2 / 15) * i;
                    let fx = x + Math.cos(angle) * size;
                    let fy = y + Math.sin(angle) * size;
                    ctx.fillRect(fx, fy, 3, 3);
                }
                ctx.restore();
            }
        }
        /********************************************************
         *                    GAME CLASS
         *******************************************************/
        class Game {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.dialogBox = document.getElementById('dialog-box');
                this.dialogText = document.getElementById('dialog-text');
                this.choicesContainer = document.getElementById('choices-container');
                this.width = 1200;
                this.height = 600;
                this.currentScene = 0;
                // Personajes
                this.boyfriend = new Sprite(350, 450, 32, 48, '#000000');
                this.girlfriend = new Sprite(450, 450, 32, 48, '#FF69B4');
                // Escenas disponibles
                this.scenes = [
                    new Scene('temple', '#E6E6FA', []),
                    new Scene('cafe', '#FFF0F5', []),
                    new Scene('park', '#F0FFF0', []),
                    new Scene('recuerdos1', '#F8F8F8', []),
                    new Scene('recuerdos2', '#F8F8F8', []),
                    new Scene('fuegosArtificiales', '#000000', []),
                ];
                // Diálogos extendidos
                this.dialog = [
                    {
                        scene: 0,
                        text: "En el templo: el día en que nos cruzamos por primera vez, sin saber que el destino nos uniría para siempre.",
                        choices: ["→ Seguir"]
                    },
                    {
                        scene: 1,
                        text: "En aquel café: largas conversaciones y risas que revelaron quiénes éramos en realidad.",
                        choices: ["→ Continuar"]
                    },
                    {
                        scene: 2,
                        text: "En el parque: bajo las estrellas, sentí que cada momento a tu lado se volvía mágico.",
                        choices: ["→ Revivir recuerdos"]
                    },
                    {
                        scene: 3,
                        text: "Manos entrelazadas... El día que noté tu nerviosismo ajustando la corbata, y entendí lo mucho que significaba para ti impresionarme.",
                        choices: ["→ Siguiente recuerdo"]
                    },
                    {
                        scene: 4,
                        text: "Aquel abrazo que me hizo sentir mariposas, las fotos espontáneas que guardan cada sonrisa compartida...",
                        choices: ["→ Ver fuegos artificiales"]
                    },
                    {
                        scene: 5,
                        text: "Y ese beso bajo los fuegos artificiales... Fue cuando supe que no quería un futuro sin ti.",
                        choices: ["→ El gran paso", "→ Esperar un poco más"]
                    }
                ];
                this.currentDialogIndex = 0;
                this.scenes.push(new Scene('wedding', '#FFFFFF', []));
                this.isWedding = false;
                this.init();
            }
            init() {
                this.setupEventListeners();
                this.gameLoop();
                this.showDialog();
            }
            setupEventListeners() {
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        this.nextDialog();
                    }
                });
            }
            gameLoop() {
                this.ctx.clearRect(0, 0, this.width, this.height);
                // Dibuja la escena actual
                this.scenes[this.currentScene].draw(this.ctx, this.width, this.height);
                // Actualiza y dibuja a los personajes
                this.boyfriend.update();
                this.girlfriend.update();
                this.boyfriend.drawCharacter(this.ctx, true);
                this.girlfriend.drawCharacter(this.ctx, false);
                requestAnimationFrame(() => this.gameLoop());
            }
            showDialog() {
                if (this.currentDialogIndex < this.dialog.length) {
                    const currentDialog = this.dialog[this.currentDialogIndex];
                    this.dialogBox.style.display = 'block';
                    this.dialogText.textContent = currentDialog.text;
                    // Botones
                    this.choicesContainer.innerHTML = currentDialog.choices
                        .map(choice => `<button class="choice-button" onclick="game.nextDialog()">${choice}</button>`)
                        .join('');
                }
            }
            nextDialog() {
                this.currentDialogIndex++;
                // Si aún hay diálogos, pasamos a la siguiente escena
                if (this.currentDialogIndex < this.dialog.length) {
                    this.currentScene = this.dialog[this.currentDialogIndex].scene;
                    this.showDialog();
                } else {
                    // Cuando se acaben los diálogos, iniciamos la escena de la boda
                    this.endGame();
                }
            }
            drawWeddingScene() {
                this.ctx.fillStyle = '#FFFFFF';
                this.ctx.fillRect(0, 0, this.width, this.height);
                
                // Arreglos florales
                this.ctx.fillStyle = '#FF69B4';
                this.ctx.beginPath();
                this.ctx.ellipse(400, 500, 40, 20, 0, 0, Math.PI*2);
                this.ctx.fill();
                
                // Personajes
                this.boyfriend.x = 500;
                this.boyfriend.y = 400;
                this.girlfriend.x = 700;
                this.girlfriend.y = 400;
                this.boyfriend.drawCharacter(this.ctx, true, true);
                this.girlfriend.drawCharacter(this.ctx, false, true);
            }

            endGame() {
                let alpha = 0;
                this.isWedding = true;
                this.girlfriend.color = '#FFFFFF';

                const fadeTransition = () => {
                    this.ctx.fillStyle = `rgba(255,255,255,${alpha})`;
                    this.ctx.fillRect(0, 0, this.width, this.height);
                    alpha += 0.02;
                    if (alpha < 1) {
                        requestAnimationFrame(fadeTransition);
                    } else {
                        this.currentScene = 6;
                        this.drawWeddingScene();
                        this.dialogBox.style.display = 'block';
                        this.dialogText.textContent = "¿Quieres caminar juntos hacia el altar del amor eterno?";
                        this.choicesContainer.innerHTML = `
                            <button class="choice-button" onclick="location.reload()">¡SÍ! 💍</button>
                            <button class="choice-button" onclick="game.nextDialog()">Ver recuerdos otra vez</button>
                        `;
                    }
                };
                fadeTransition();
            }
        }
        // Iniciar el juego
        const game = new Game();
    </script>
</body>
</html>